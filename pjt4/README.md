# 📎 BRUEMI

---

### 📌 Project Summary & Background

VSLAM기반 자율주행 서비스 로봇은 실내에서 물건을 전달해주는 수요응답형 서비스 로봇입니다. 로봇은 실내 지도작성, 위치추정, 장애물 회피 기능을 수행합니다. 천장을 보는 카메라를 이용하여 VSLAM을 사용하기에 빠르게 지도작성을 수행하고 초기세팅시간이 짧은 장점이 있습니다.

저는 기술이 사회에 긍정적인 영향을 미칠 수 있다는 확신을 가지고 있습니다. 현재 사회에서는 고령화, 인력 부족, 비대면 서비스의 필요성 등 다양한 이슈가 존재합니다. 이러한 문제들을 해결하기 위해선 새로운 접근 방식이 필요하다고 생각했습니다. 그 중 하나로 로봇 기술이 주목받고 있었습니다. 하지만 대부분의 로봇은 가격이 비싸거나 복잡한 기능 때문에 일반 소비자들이 접하기 어려운 상황이었습니다. 보급형 서비스 로봇 프로젝트를 통해 일반 사용자도 쉽게 사용할 수 있는 서비스를 제공하고자 했습니다.  

프론트엔드 개발자로서 사용자 경험과 인터랙션에 집중하는 것을 중요하게 생각합니다. 이번 프로젝트에서 호출, 배송, 취소, 대기열 등록 등의 다양한 기능을 웹 환경에서 구현함으로써 사용자와 로봇 간의 원활한 상호작용을 가능하게 하는 역할을 수행할 수 있었습니다. 위와 같은 계기로 이 프로젝트를 시작하였으며, 실제 개발 과정에서도 사용자 중심적인 디자인과 효율적인 코드 작성에 초점을 맞추어 진행했습니다.



### ❕ Role

- <mark>Full-Stack : 1명</mark>
- 영상처리 : 1명
- 임베디드 : 2명
- 자율주행 : 2명



### 📜 Technology Stack

- Front-End : JavaScript, React, Canvas, Swiper, ws module, audio-player, Sass, styled-components, MUI
- Back-End : Node.js, Express, MySQL, ws module, fs module



### 🔨 Main Function

- 호출

![](https://jk-portfolio1.web.app/images/Modal/pjt1/1.gif)

서빙 로봇을 호출하고 호출 순서를 확인할 수 있는 컴포넌트입니다. 보내는곳, 받는곳, 음성파일을 설정하여 서빙 로봇을 호출할 수 있고, 한 사람당 한 번의 호출만 가능하도록 구현했습니다. 호출 리스트는 최대 10개 이고, 클라이언트의 리스트와 임베디드 시스템의 리스트가 동일해야 하므로 서버에서 관리하며 리스트에 변화가 있을때마다 ws module을 이용해 양방향으로 통신하며 리스트를 최신화 시키도록 구현했습니다.

MUI의 MenuItem컴포넌트를 활용하여 위치를 선택하고, FormControl컴포넌트를를 활용하여 선택한 위치에 대한 유효성을 검증했습니다. 또한, 호출 리스트를 효율적으로 보여주기 위해 Table컴포넌트를 활용했고, 자신이 호출한 내용의 배경색을 노란색으로 바꿔 한눈에 파악할 수 있도록 구현했습니다. 부르기 버튼을 클릭하면 몇 번째 순서인지 바로 알 수 있도록 focus를 이동합니다. CSS프레임워크 MUI를 사용하여 빠르고 효율적으로 구현했습니다.



- 취소 & 녹음  

![](https://jk-portfolio1.web.app/images/Modal/pjt1/2.gif)

무르기 버튼을 클릭하면 자신이 호출했던 리스트를 제거합니다. 버튼 클릭 시 서버에 사용자의 아이디를 넘겨주고 서버에 구성되어있는 List에서 제거합니다.

호출할 때 단순히 물건만 전달해 주는 것이 아니라 음성도 같이 전달해 줄 수 있도록 구현했습니다. 녹음 버튼을 클릭하면 RecordModal이 나오도록 설계했고, 음성녹음은 사용자에게 권한을 요청하고 수락했을 시 사용하고 있는 디바이스의 녹음 기능을 통해 음성을 최대 30초 까지 녹음합니다. 음성 파일은 JavaScript의 Audio API를 사용했고, 서버에서 fs module의 writeFile 기능을 이용하여 저장하며 저장된 파일의 URL만 서빙 로봇으로 넘겨주어 음성 데이터를 출력했습니다. 클라이언트에서도 음성 파일의 URL을 사용하여 사용자가 언제든지 자기가 했던 녹음을 확인할 수 있고, 무르기버튼이나 음성제거 버튼을 클릭하면 음성 파일을 제거할 수 있도록 구현했습니다.



- 로그인

![](https://jk-portfolio1.web.app/images/Modal/pjt1/3.gif)

form을 사용하여 로그인 데이터를 관리하고 비교 연산자를 통해 사용자가 유효성 검사에 통과되었을때만 로그인 버튼이 활성화 되도록 구현했습니다. 로그인 버튼을 클릭하면, 해당 form 데이터가 서버로 전송됩니다. 서버에서는 MySQL 데이터베이스를 참조하여 사용자의 정보를 확인합니다. 이 과정을 통해 사용자 인증이 성공적으로 이루어지며, 따라서 로그인 과정이 완료됩니다.



- 회원가입

![](https://jk-portfolio1.web.app/images/Modal/pjt1/4.gif)

회원가입 역시 form을 사용하여 데이터를 관리했고, 사용자가 실시간으로 유효성을 확인하며 회원가입을 진행할 수 있도록 구현했습니다. 모든 유효성 검사에 통과되면 회원가입 버튼이 활성화 되고, 회원가입 버튼 클릭 시 MySQL 데이터베이스를 참조하여 사용자의 정보를 확인합니다. 회원가입에 성공하면 자동으로 로그인이 되고, 실패시 toastify를 활용하여 안내 메세지를 보여줍니다.



- 클라이언트 ws module 주요기능

![](https://jk-portfolio1.web.app/images/Modal/pjt1/5.gif)



- 서버 ws module 주요기능

![](https://jk-portfolio1.web.app/images/Modal/pjt1/6.gif)



---

### 🚩 Learned

##### # 짧은 개발기간

프로젝트 기간이 짧았습니다. 단기간에 프로젝트를 완성하기 위해 가장 익숙한 프레임워크인 React와 Node.js를 사용하여 클라이언트와 서버를 구축했고, 타이트한 스케줄 관리를 위해 협업툴(JIRA)을 적극적으로 사용하며 제한된 3주 동안 목표로 한 개발을 성공적으로 마무리할 수 있었습니다. 시간 제약이 있는 상황에서의 효율적인 개발 방법과 스케줄 관리의 중요성을 깨달았습니다.  

##### # 임베디드 시스템 과의 통신

서버와 임베디드(로봇)간의 웹소켓 통신을 설계하고 구현하는데 어려움이있었습니다. 서버와 클라이언트를 중심으로 웹소켓 통신을 설계하고 구현했는데 이에 맞춰서 임베디드와의 웹소켓 통신을 설계하려고 하니 데이터 전달방식에 제약사항이 생겨 문제가 발생했습니다. 임베디드쪽에 익숙하지 않다보니 데이터 전달방식을 생각하지 않고 구현해서 문제가 생긴것이였습니다. 이를 해결하기 위해 임베디드 개발자와 협업하여 데이터 전달방식을 통일하고, 임베디드 시스템과의 웹소켓 통신을 먼저 구현한 후에 클라이언트 통신을 구현함으로써 해결할 수 있었습니다.  

##### # setInterval VS requestAnimationFrame

setInterval : 일정한 간격으로 함수를 호출하기 때문에, 브라우저가현재 실행 가능한 작업을 고려하지 않고 계속해서 함수를 호출하여버벅거리는 현상이 지속되며 CPU 및 배터리가 낭비될 수 있고,애니메이션 처리 시 일정한 간격으로 업데이트되므로, 화면이 부드럽게표시되지 않을 수 있습니다. requestAnimationFrame : 브라우저의 리프레시 주기에 맞추어 호출되기때문에, 브라우저가 최적의 타이밍에서 함수를 실행하도록 돕습니다.이로 인해 더 나은 성능 및 배터리 효율성을 제공할 수 있습니다.애니메이션 처리에 적합한 메소드로, 브라우저가 최적의 시기에애니메이션을 업데이트하므로 부드럽고 자연스러운 애니메이션 효과를얻을 수 있습니다. 일반적으로, 애니메이션 및 시간 기반 작업을 처리할 때는 requestAnimationFrame함수를 사용하는 것이 더 좋은 선택이라는 점을 알게됐고, 부드러운 애니메이션 및 효율적인 작업 처리를 위해 requestAnimationFrame함수를 사용하여 '부르미'를 구현했습니다.



### 🔑 Result

- 시간 제약이 있는 상황에서 효율적인 개발 방법과 스케줄 관리의 중요성을 깨달았습니다. 또한, 임베디드 시스템과의 데이터 전달방식이나 제약사항에 대해 학습할 수 있었고, 무엇보다 디자인 적인 요소들에 대한 눈높이들이 한 층 높아지는 프로젝트였다고 생각합니다.



### ⚙️ Getting Started

```javascript
# FE 폴더에서
    - npm i
    - npm start
# BE 폴더에서
    - npm i
    - nodemon server.js
```

---